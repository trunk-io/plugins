version: 0.1
tools:
  definitions:
    - name: rustfmt
      runtime: rust
      package: rustfmt
      environment:
        - name: PATH
          list: ["${tool}/bin"]
      shims: [rustfmt]
lint:
  definitions:
    - name: rustfmt
      tools: [rustfmt]
      commands:
        - name: format
          output: rewrite
          run: rustfmt
          success_codes: [0]
          stdin: true
          cache_results: true
          formatter: true
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      direct_configs:
        - rustfmt.toml
        - .rustfmt.toml
      suggest_if: files_present
      known_good_version: 1.65.0
      environment:
        - name: PATH
          list: ["${linter}/bin"]
      version_command:
        parse_regex: ${semver}
        run: rustfmt --version
