version: 0.1
tools:
  definitions:
    - name: mypy
      runtime: python
      package: mypy
      shims: [mypy]
      known_good_version: 0.931
lint:
  definitions:
    - name: mypy
      files: [python, python-interface]
      commands:
        # - name: lint
        #   # Custom parser type defined in the trunk cli to handle mypy's output.
        #   output: mypy
        #   run:
        #     mypy --ignore-missing-imports --follow-imports=silent --show-error-codes
        #     --show-column-numbers ${target}
        #   success_codes: [0, 1]
        #   stdin: false
        - name: lint-ci
          # Custom parser type defined in the trunk cli to handle mypy's output.
          output: mypy
          run:
            mypy --ignore-missing-imports --follow-imports=silent --show-error-codes
            --show-column-numbers ${workspace}
          success_codes: [0, 1]
          stdin: false
          target: ${root_or_parent_with(file_that_will_never_exist)}
          run_when: [ci]
      runtime: python
      package: mypy
      tools: [mypy]
      direct_configs:
        - mypy.ini
        - .mypy.ini
      affects_cache:
        - pyproject.toml
        - setup.cfg
      suggest_if: config_present
      issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
      known_good_version: 0.931
      version_command:
        parse_regex: ${semver}
        run: mypy --version
    # - name: mypy-all
    #   files: [python]
    #   commands:
    #     - name: lint
    #       # Custom parser type defined in the trunk cli to handle mypy's output.
    #       output: mypy
    #       run:
    #         mypy --ignore-missing-imports --follow-imports=silent --show-error-codes
    #         --show-column-numbers
    #       success_codes: [0, 1]
    #       stdin: false
    #       target: ${root_or_parent_with(file_that_will_never_exist)}
    #   runtime: python
    #   package: mypy
    #   run_when: [ci, cli]
    #   direct_configs:
    #     - mypy.ini
    #     - .mypy.ini
    #   affects_cache:
    #     - pyproject.toml
    #     - setup.cfg
    #   is_recommended: false
    #   issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
    #   known_good_version: 0.931
    #   version_command:
    #     parse_regex: ${semver}
    #     run: mypy --version
