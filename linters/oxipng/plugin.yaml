version: 0.1
lint:
  downloads:
    - name: oxipng
      downloads:
        - os:
            linux: unknown-linux-musl
            macos: apple-darwin
          cpu: x86_64
          url: https://github.com/shssoichiro/oxipng/releases/download/v${version}/oxipng-${version}-${cpu}-${os}.tar.gz
          strip_components: 1
  definitions:
    - name: oxipng
      files: [png]
      download: oxipng
      commands:
        - output: rewrite
          run: oxipng --strip safe ${target}
          success_codes: [0]
          in_place: true
          disable_upstream: true
      environment:
        - name: PATH
          list: ["${linter}"]
      include_lfs: true
      good_without_config: true
      version_command:
        parse_regex: ${semver}
        run: oxipng --version
